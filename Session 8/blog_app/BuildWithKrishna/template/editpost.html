{% extends 'basics.html' %}

{% block title %}
Edit Post
{% endblock title %}

{% block body %}
<div class="container my-5">
    <h2 class="mb-4">Edit Post</h2>

    <form method="POST" enctype="multipart/form-data" action="/update/{{post.post_id}}">
        {% csrf_token %}
        <!-- Title -->
        <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <input type="text" class="form-control" id="title" name="title" 
                   value="{{ post.post_title }}" required>
        </div>

        <!-- Content -->
        <div class="mb-3">
            <label for="content" class="form-label">Content</label>
            <textarea class="form-control" id="content" name="content" rows="5" required>{{ post.post_content }}</textarea>
        </div>

        <!-- Existing Image -->
        {% if post.post_image %}
        <div class="mb-3">
            <label class="form-label">Current Image</label>
            <div>
                <img src="{{ post.post_image.url }}" alt="{{ post.post_title }}" 
                     class="img-fluid rounded mb-2" style="max-height:300px; object-fit:cover;">
            </div>
        </div>
        {% endif %}

        <!-- Upload New Image -->
        <div class="mb-3">
            <label for="image" class="form-label">Change Image (optional)</label>
            <input class="form-control" id="image" name="thumbnail" type="file">
        </div>

        <!-- Submit -->
        <button type="submit" class="btn btn-success">
            <i class="bi bi-pencil-square"></i> Update Post
        </button>
        <a href="{% url 'allpost' %}" class="btn btn-secondary">Cancel</a>
    </form>
</div>
{% endblock body %}
